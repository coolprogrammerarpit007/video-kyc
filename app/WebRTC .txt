ğŸ¯ What this phase is about (1-line truth)

WebRTC is the technology that allows two browsers to send live audio/video directly to each other.

Laravel does NOT send video.
Laravel only helps the browsers find each other.

ğŸ§  First remove a BIG misconception (VERY IMPORTANT)

âŒ WebSocket sends video
âŒ Laravel handles media
âŒ Server relays camera stream

ğŸ§  Correct mental model (LOCK THIS)

Camera/Mic
   â†“
Browser (User)  â†â”€â”€â”€â”€â”€â”€â†’  Browser (Verifier)
   â†‘                    â†‘
   â””â”€â”€â”€â”€ Laravel WebSocket (SIGNALING ONLY)


Video/audio goes browser â†” browser

Laravel only exchanges messages (signals)

ğŸ§  What problem WebRTC solves

Browsers are:

behind NAT

behind firewalls

donâ€™t know each otherâ€™s IPs

WebRTC solves:

discovery

negotiation

connection

encryption


ğŸ§© WebRTC has 3 CORE PARTS (MEMORIZE)
1ï¸âƒ£ Media

Camera & microphone access
(getUserMedia)

2ï¸âƒ£ Connection

Peer-to-Peer tunnel
(RTCPeerConnection)

3ï¸âƒ£ Signaling

Exchange connection info
(THIS IS WHERE LARAVEL COMES IN)


ğŸ§  What is â€œSignalingâ€?

Signaling = exchanging metadata required to establish a WebRTC connection

Examples:

â€œI want to start a callâ€

â€œHere is my connection offerâ€

â€œHere is my answerâ€

â€œHere is my network candidateâ€

This data is:

small JSON

NOT audio/video

safe to send via WebSocket


ğŸ§  WebRTC handshake (VERY IMPORTANT FLOW)

This is the core flow you must understand.

step-1: User creates OFFER

User browser:
â€œI want to start videoâ€
â†“
Creates SDP OFFER

Step-2: Offer sent via Laravel

POST /send-offer
â†“
Laravel broadcasts offer

Step-3: Verifier receives OFFER

Verifier browser:
â€œGot offerâ€
â†“
Creates SDP ANSWER

Step-4: Answer sent back

POST /send-answer
â†“
Laravel broadcasts answer


Step-5: ICE candidates exchange

Both sides:
â€œHereâ€™s my network infoâ€
â†“
Laravel broadcasts candidates


After this:
âœ… Peer-to-peer connection established
âœ… Video starts flowing directly

ğŸ§  What are SDP & ICE (simple explanation)
ğŸ”¹ SDP (Session Description Protocol)

Think of it as:

â€œHereâ€™s how I can talk (video/audio formats, codecs, etc.)â€

Two types:

OFFER

ANSWER

ğŸ”¹ ICE Candidates

Think of it as:

â€œHere are the possible network paths you can reach me onâ€

Exchanged many times.

ğŸ§  Why Laravel WebSocket is PERFECT here

Laravel WebSocket:

real-time

authenticated

session-scoped

reliable

Laravel:

does not care what SDP is

just forwards messages securely

ğŸ§  Mapping WebRTC to YOUR KYC system
Concept	Your system
Signaling channel	kyc-session.{uuid}
Offer sender	User
Answer sender	Verifier
Permission gate	can_start_video
Security	Channel authorization

Perfect match.

ğŸ§  IMPORTANT RULE (LOCK THIS)

âŒ Never start WebRTC before can_start_video === true

Frontend MUST check this before:

creating offer

accessing camera




//*******************************************


High Level Signalling flow

User clicks "Start Video"
â†“
User creates OFFER (SDP)
â†“
Offer sent to Laravel
â†“
Laravel broadcasts offer
â†“
Verifier receives offer
â†“
Verifier creates ANSWER (SDP)
â†“
Answer sent to Laravel
â†“
Laravel broadcasts answer
â†“
Both exchange ICE candidates
â†“
Direct P2P video connection established



// ********************************************
// ********************************************


| Action      | Who      | Meaning                     |
| ----------- | -------- | --------------------------- |
| Send OFFER  | User     | â€œI want to start videoâ€     |
| Send ANSWER | Verifier | â€œI accept video connectionâ€ |
| Send ICE    | Both     | â€œHereâ€™s how to reach meâ€    |


